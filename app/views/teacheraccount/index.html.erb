<div class="container">
  <div class="row mt-5 justify-content-center">
    <div class="col-12 text-center">

      <h3>Teacher Profile</h3>
      <p>Welcome to your teacher account dashboard! Here you can manage your profile, view your uploaded resources, and track your students' progress.</p>
    </div>
  </div>

  <%# --- START: CARDS SECTION --- %>
  <%# Remove the unnecessary inner <div class="container"> here %>
  <div class="row justify-content-center pt-3 pb-5"> <%# Added pt-3/pb-5 for vertical spacing %>
    <div class="col-12 col-lg-10">
      <div class="row row-cols-1 row-cols-md-3 g-4 justify-content-center"> <%# Corrected 'row-cols' to 'row-cols-1' and g-5 to g-4 for consistency %>

        <%# --- CARD 1: Profile --- %>
        <div class="col">
          <div class="card h-100 border-0 shadow-sm text-center p-3">
            <div class="card-body">
              <h1 class="mb-3 text-success">üë©‚Äçüéì</h1>
              <h5 class="card-title">View and Edit Profile</h5>
              <h6 class="card-text">My Rating</h6>
              <p class="card-text text-secondary">‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è</p>
            </div>
          </div>
        </div>

        <%# --- CARD 2: Resources/Downloads --- %>
        <div class="col">
          <div class="card h-100 border-0 shadow-sm text-center p-3">
            <div class="card-body">
              <h1 class="mb-3 text-success">10</h1>
              <h5 class="card-title">Downloads</h5>
              <%= link_to 'Create Resource', new_resource_path, class: 'btn btn-primary mt-2' %>
            </div>
          </div>
        </div>

        <%# --- CARD 3: Study Groups --- %>
        <div class="col">
          <div class="card h-100 border-0 shadow-sm text-center p-3">
            <div class="card-body">
              <h1 class="mb-3 text-success">5</h1>
              <h5 class="card-title">Study Groups</h5>
              <%= link_to 'View Study Groups', study_groups_path, class: 'btn btn-primary mt-2' %>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <h5 class="text-center mb-3">My Resources</h5>

  <%= form_with(url: teacher_account_path, method: :get, local: true, class: "d-flex justify-content-start align-items-center mb-4") do |form| %>

    <%= hidden_field_tag :query, params[:query] %>
    
    <div class="me-3">
      <%= select_tag :subject, 
                      options_for_select(['Maths', 'Science', 'History', 'English', 'Economics', 'Geography'], params[:subject]), 
                      { include_blank: 'Filter by Subject', class: 'form-select', onchange: 'this.form.submit();' } %>
    </div>

    <div class="me-3">
      <%= select_tag :level, 
                      options_for_select(['GCSE', 'A-Level', 'Undergraduate', 'Postgraduate'], params[:level]), 
                      { include_blank: 'Filter by Level', class: 'form-select', onchange: 'this.form.submit();' } %>
    </div>

    <div class="me-3">
      <%= select_tag :resource_type, 
                      options_for_select(['Document', 'Video', 'Quiz', 'Website', 'TedTalk', 'Forum'], params[:resource_type]), 
                      { include_blank: 'Filter by Type', class: 'form-select', onchange: 'this.form.submit();' } %>
    </div>
  <% end %>


  <%# --- TABLE --- %>
  <table class="table table-striped table-hover align-middle">
    <thead class="table-light">
      <tr>
        <%# --- SORTING LINK: Title (Kept simple) --- %>
        <th scope="col">Title</th>
        
        <%# --- SORTING LINK: Subject --- %>
        <th scope="col" class="text-center">Subject</th>
        
        <%# --- SORTING LINK: Level --- %>
        <th scope="col" class="text-center">Level</th>
        
        <%# --- SORTING LINK: Resource Type --- %>
        <th scope="col" class="text-center">Resource Type</th>
        
        <%# --- SORTING LINK: Tutor --- %>
        <th scope="col" class="text-center">Tutor</th>
        
        <%# --- SORTING LINK: Rating --- %>
        <th scope="col" class="text-center">
          <%= link_to "Rating", resources_path(sort: 'rating', direction: 'desc'), class: "text-decoration-none text-dark" %>
        </th>

        <%# --- SORTING LINK: Edit Resource (Action Column) --- %>
        <th scope="col" class="text-center">Action</th>
      </tr>
    </thead>
    
    <tbody>
      <tr>
        <td>Introduction to Vectors</td>
        <td class="text-center">Math</td>
        <td class="text-center">A-Level</td>
        <td class="text-center">Worksheet</td>
        <td class="text-center">Ms. Smith</td>
        <td class="text-center">‚≠ê4.8</td>
        <td class="text-center">
          <%= link_to '‚úèÔ∏è','#', class: 'edit-icon' %> 
        </td>
      </tr>

      <tr>
        <td>French Revolution Timeline</td>
        <td class="text-center">History</td>
        <td class="text-center">GCSE</td>
        <td class="text-center">Notes</td>
        <td class="text-center">Mr. Jones</td>
        <td class="text-center">‚≠ê4.2</td>
        <td class="text-center">
          <%= link_to '‚úèÔ∏è','#', class: 'edit-icon' %> 
        </td>
      </tr>

      <tr>
        <td>DSGE Model</td>
        <td class="text-center">Economics</td>
        <td class="text-center">University</td>
        <td class="text-center">Video</td>
        <td class="text-center">Miss. Sharma</td>
        <td class="text-center">‚≠ê5.0</td>
        <td class="text-center">
          <%= link_to '‚úèÔ∏è','#', class: 'edit-icon' %> 
        </td>
      </tr>
    </tbody>
  </table>
  <%# --- END: RESOURCES TABLE SECTION --- %>

</div> <%# --- CLOSING TAG FOR MAIN CONTAINER --- %>