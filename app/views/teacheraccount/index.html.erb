<div class="container">
  <div class="row mt-5 justify-content-center">
    <div class="col-12 text-center">

      <h3>Teacher Profile</h3>
      <p>Welcome to your teacher account dashboard! Here you can manage your profile, view your uploaded resources, and track your students' progress.</p>
    </div>
  </div>

  <%# --- START: CARDS SECTION --- %>
  <div class="row justify-content-center pt-3 pb-5"> 
    <div class="col-12 col-lg-10">
      <div class="row row-cols-1 row-cols-md-3 g-4 justify-content-center"> 

        <%# --- CARD 1: Profile --- %>
        <div class="col">
          <div class="card h-100 border-0 shadow-sm text-center p-3">
            <div class="card-body">
              <h1 class="mb-3 text-success">ğŸ‘©â€ğŸ“</h1>
              <h5 class="card-title">View and Edit Profile</h5>
              <h6 class="card-text">My Rating</h6>
              <p class="card-text text-secondary">â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸</p>
            </div>
          </div>
        </div>

        <%# --- CARD 2: Resources/Downloads --- %>
        <div class="col">
          <div class="card h-100 border-0 shadow-sm text-center p-3">
            <div class="card-body">
              <h1 class="mb-3 text-success">ğŸ’¬</h1>
              <h5 class="card-title">Chat Rooms</h5>
              <%= link_to 'View Chats', '#', class: 'btn btn-primary mt-2' %>
            </div>
          </div>
        </div>

        <%# --- CARD 3: Study Groups --- %>
        <div class="col">
          <div class="card h-100 border-0 shadow-sm text-center p-3">
            <div class="card-body">
              <h1 class="mb-3 text-success">ğŸ“š</h1>
              <h5 class="card-title">Study Groups</h5>
              <%= link_to 'View Study Groups', study_groups_path, class: 'btn btn-primary mt-2' %>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
  <%# --- END: CARDS SECTION --- %>

  <h5 class="text-center mb-3">My Resources</h5>

  <%# --- START: FILTER FORM --- %>
  <%= form_with(url: teacher_account_path, method: :get, local: true, class: "d-flex justify-content-start align-items-center mb-4") do |form| %>

    <%= hidden_field_tag :query, params[:query] %>
    
    <div class="me-3">
      <%= select_tag :subject, 
                      options_for_select(['Maths', 'Science', 'History', 'English', 'Economics', 'Geography'], params[:subject]), 
                      { include_blank: 'Filter by Subject', class: 'form-select', onchange: 'this.form.submit();' } %>
    </div>

    <div class="me-3">
      <%= select_tag :level, 
                      options_for_select(['GCSE', 'A-Level', 'Undergraduate', 'Postgraduate'], params[:level]), 
                      { include_blank: 'Filter by Level', class: 'form-select', onchange: 'this.form.submit();' } %>
    </div>

    <div class="me-3">
      <%= select_tag :resource_type, 
                      options_for_select(['Document', 'Video', 'Quiz', 'Website', 'TedTalk', 'Forum'], params[:resource_type]), 
                      { include_blank: 'Filter by Type', class: 'form-select', onchange: 'this.form.submit();' } %>
    </div>
  <% end %>
  <%# --- END: FILTER FORM --- %>


  <%# --- START: TABLE --- %>
  <table class="table table-striped table-hover align-middle">
    <thead class="table-light">
      <tr>
        <th scope="col">Title</th>
        <th scope="col" class="text-center">Subject</th>
        <th scope="col" class="text-center">Level</th>
        <th scope="col" class="text-center">Resource Type</th>
        </th>
        <th scope="col" class="text-center">Edit</th>
        <th scope="col" class="text-center">Delete</th>
      </tr>
    </thead>
    
    <tbody>
      <% if @resources.present? %>
        <% @resources.each do |resource| %>
          <tr>
            <td><%= resource.title %></td>
            <td class="text-center"><%= resource.subject %></td>
            <td class="text-center"><%= resource.grade_level %></td>
            <td class="text-center"><%= resource.resource_type %></td>
            <%# NOTE: Update 'user.email' if your User model uses a different column (e.g., user.email) %>
            <td class="text-center">
              <%= link_to 'âœï¸', edit_resource_path(resource), class: 'edit-icon' %> 
            </td>
            <td class="text-center">
              <%= link_to 'ğŸ—‘ï¸', resource_path(resource), 
                  data: { 
                    turbo_method: :delete,
                    turbo_confirm: "Are you sure you want to delete '#{resource.title}'?"
                  }, 
                  class: 'text-danger' %>
            </td>
          </tr>
        <% end %>
      <% else %>
        <tr>
          <td colspan="7" class="text-center text-muted">No resources uploaded yet.</td>
        </tr>
      <% end %>
    </tbody>
  </table>
  <%# --- END: TABLE --- %>

</div> <%# --- CLOSING TAG FOR MAIN CONTAINER --- %>