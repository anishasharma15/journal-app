<div class="container">
  <div class="row mt-5 justify-content-center">
    <div class="col-12 text-center">  <%# Sets column width and centers text %>

      <h3>Student Profile</h3>
      <p>Welcome to your student account dashboard! Here you can manage your profile, view your saved resources, and track your learning progress.</p>

  <br>

    <div class="container"> 
  
  <div class="col-10 col-lg-10 mx-auto">
    <div class="row row-cols row-cols-md-3 g-5 justify-content-center">

      <div class="col">
        <div class="card h-100 border-0 shadow-sm text-center p-3">
          <div class="card-body">
            <h1 class="mb-3 text-success">üë©‚Äçüéì</h1>
            <h5 class="card-title">View and Edit Profile</h5>
          </div>
        </div>
      </div>

      <div class="col">
        <div class="card h-100 border-0 shadow-sm text-center p-3">
          <div class="card-body">
            <h1 class="mb-3 text-success">‚¨áÔ∏è</h1>
            <h5 class="card-title">Downloaded Resources</h5>
            <h2 class="card-text">10</h2>
          </div>
        </div>
      </div>

      <div class="col">
        <div class="card h-100 border-0 shadow-sm text-center p-3">
          <div class="card-body">
            <h1 class="mb-3 text-success">10</h1>
            <h5 class="card-title">Study Groups</h5>
            <%= link_to 'View Study Groups', study_groups_path, class: 'btn btn-primary mt-2' %>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<br>

  <h5 class="text-center">My Resources</h5>

<%= form_with(url: teacher_account_path, method: :get, local: true, class: "d-flex justify-content-start align-items-center mb-4") do |form| %>

    <%= hidden_field_tag :query, params[:query] %>
    
    <div class="me-3">
      <%= select_tag :subject, 
                      options_for_select(['Maths', 'Science', 'History', 'English', 'Economics', 'Geography'], params[:subject]), 
                      { include_blank: 'Filter by Subject', class: 'form-select', onchange: 'this.form.submit();' } %>
    </div>

    <div class="me-3">
      <%= select_tag :level, 
                      options_for_select(['GCSE', 'A-Level', 'Undergraduate', 'Postgraduate'], params[:level]), 
                      { include_blank: 'Filter by Level', class: 'form-select', onchange: 'this.form.submit();' } %>
    </div>

    <div class="me-3">
      <%= select_tag :resource_type, 
                      options_for_select(['Document', 'Video', 'Quiz', 'Website', 'TedTalk', 'Forum'], params[:resource_type]), 
                      { include_blank: 'Filter by Type', class: 'form-select', onchange: 'this.form.submit();' } %>
    </div>
  <% end %>

<table class="table table-striped table-hover align-middle">
  <thead class="table-light">
    <tr>
      <%# --- SORTING LINK: Title (Kept simple) --- %>
      <th scope="col">Title</th>
      
      <%# --- DROPDOWN FILTER: SUBJECT --- %>
      <th scope="col" class="text-center">
        <div class="dropdown">
          <button class="btn btn-sm btn-light dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
            Subject
          </button>
          <ul class="dropdown-menu">
            <li><%= link_to "All Subjects", resources_path(subject: nil), class: "dropdown-item" %></li>
            <li><hr class="dropdown-divider"></li>
            <li><%= link_to "Math", resources_path(subject: 'Math'), class: "dropdown-item" %></li>
            <li><%= link_to "History", resources_path(subject: 'History'), class: "dropdown-item" %></li>
          </ul>
        </div>
      </th>
      
      <%# --- DROPDOWN FILTER: LEVEL --- %>
      <th scope="col" class="text-center">
        <div class="dropdown">
          <button class="btn btn-sm btn-light dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
            Level
          </button>
          <ul class="dropdown-menu">
            <li><%= link_to "All Levels", resources_path(level: nil), class: "dropdown-item" %></li>
            <li><hr class="dropdown-divider"></li>
            <li><%= link_to "GCSE", resources_path(level: 'GCSE'), class: "dropdown-item" %></li>
            <li><%= link_to "A-Level", resources_path(level: 'A-Level'), class: "dropdown-item" %></li>
          </ul>
        </div>
      </th>
      
      <%# --- DROPDOWN FILTER: RESOURCE TYPE --- %>
      <th scope="col" class="text-center">
        <div class="dropdown">
          <button class="btn btn-sm btn-light dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
            Resource Type
          </button>
          <ul class="dropdown-menu">
            <li><%= link_to "All Types", resources_path(type: nil), class: "dropdown-item" %></li>
            <li><hr class="dropdown-divider"></li>
            <li><%= link_to "PDF", resources_path(type: 'PDF'), class: "dropdown-item" %></li>
            <li><%= link_to "Video", resources_path(type: 'Video'), class: "dropdown-item" %></li>
          </ul>
        </div>
      </th>
      
      <%# --- SORTING LINK: Tutor --- %>
      <th scope="col" class="text-center">Tutor</th>
      
      <%# --- SORTING LINK: Rating --- %>
      <th scope="col" class="text-center">
        <%= link_to "Rating", resources_path(sort: 'rating', direction: 'desc'), class: "text-decoration-none text-dark" %>
      </th>

        <th scope="col" class="text-center">
        <%= link_to "Download", resources_path(sort: 'download', direction: 'desc'), class: "text-decoration-none text-dark" %>
      </th>

    <div>
      
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Introduction to Vectors</td>
      <td class="text-center">Math</td>
      <td class="text-center">A-Level</td>
      <td class="text-center">Worksheet</td>
      <td class="text-center">Ms. Smith</td>
      <td class="text-center">‚≠ê4.8</td>
      <td class="text-center"><%= link_to '‚¨áÔ∏è', '#', class: 'download-icon text-center' %></td>
    </tr>
    <tr>
      <td>French Revolution Timeline</td>
      <td class="text-center">History</td>
      <td class="text-center">GCSE</td>
      <td class="text-center">Notes</td>
      <td class="text-center">Mr. Jones</td>
      <td class="text-center">‚≠ê4.2</td>
      <td class="text-center"><%= link_to '‚¨áÔ∏è', '#', class: 'download-icon text-center' %></td>
    </tr>
    <tr>
      <td>DSGE Model</td>
      <td class="text-center">Economics</td>
      <td class="text-center">University</td>
      <td class="text-center">Video</td>
      <td class="text-center">Miss. Sharma</td>
      <td class="text-center">‚≠ê5.0</td>
      <td class="text-center"><%= link_to '‚¨áÔ∏è', '#', class: 'download-icon text-center' %></td>
    </tr>
  </tbody>
</table>
    </div>
  </div>
</div>